window.__nefbl_pack__bundleSrc__[34]=function(){var e,n,t={};function o(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=(e=window.__nefbl_pack__getBundle("1")).Component,i=e.ref,l=(e=window.__nefbl_pack__getBundle("44")).default,c=(e=window.__nefbl_pack__getBundle("46")).default,a=(e=window.__nefbl_pack__getBundle("47")).default,d=function(e){},s=r({template:a,styles:[c]})(n=function(){function e(){var n,t,o;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),o=void 0,(t="active")in(n=this)?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o}var n,t,r;return n=e,(t=[{key:"$setup",value:function(){return{active:i("move")}}},{key:"changeTool",value:function(e){this.active=e.target.getAttribute("name"),d({activeTool:this.active})}},{key:"$mounted",value:function(){setTimeout((function(){d({activeTool:"move"})})),l(document.getElementById("backcolor"),document.getElementById("backcolor").style.backgroundColor||"black","选择背景色").then((function(e){document.getElementById("backcolor").style.backgroundColor=e})),l(document.getElementById("forecolor"),document.getElementById("forecolor").style.backgroundColor||"white","选择前景色").then((function(e){document.getElementById("forecolor").style.backgroundColor=e}))}},{key:"addListener",value:function(e){d=e}}])&&o(n.prototype,t),r&&o(n,r),Object.defineProperty(n,"prototype",{writable:!1}),e}())||n;return t.default=s,t},window.__nefbl_pack__bundleSrc__[44]=function(){var e={};return window.__nefbl_pack__getBundle("45"),e.default=ColorsPicker,e},window.__nefbl_pack__bundleSrc__[45]=function(){
/*!
 * Colors Picker - 一个类似浏览器调试工具中颜色选择器的H5版本的小组件。
 * git+https://github.com/hai2007/colors-picker.git
 *
 * author 你好2007 < https://hai2007.gitee.io/sweethome >
 *
 * version 0.3.3
 *
 * Copyright (c) 2021-2022 hai2007 走一步，再走一步。
 * Released under the MIT license
 *
 * Date:Thu Jun 02 2022 19:27:45 GMT+0800 (GMT+08:00)
 */
return function(){"use strict";function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n){if(e){if("string"==typeof e)return o(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(e,n):void 0}}function o(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}function r(e,n){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=t(e))||n&&e&&"number"==typeof e.length){o&&(e=o);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,a=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return c=e.done,e},e:function(e){a=!0,l=e},f:function(){try{c||null==o.return||o.return()}finally{if(a)throw l}}}}var i="[\\x20\\t\\r\\n\\f]";
/*!
   * 🌐 - 颜色格式化
   * https://github.com/hai2007/browser.js/blob/master/formatColor.js
   *
   * author hai2007 < https://hai2007.gitee.io/sweethome >
   *
   * Copyright (c) 2021-present hai2007 走一步，再走一步。
   * Released under the MIT license
   */
function l(e){var n=document.getElementsByTagName("head")[0];n.style.color=e;var t,o,r,l=(t=n,o="color",r=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle,"string"==typeof o?r.getPropertyValue(o):r).replace(/^rgba?\(([^)]+)\)$/,"$1").split(new RegExp("\\,"+i));return[+l[0],+l[1],+l[2],null==l[3]?1:+l[3]]}
/*!
   * 🌐 - 提供常用的DOM操作方法
   * https://github.com/hai2007/browser.js/blob/master/xhtml.js
   *
   * author hai2007 < https://hai2007.gitee.io/sweethome >
   *
   * Copyright (c) 2021-present hai2007 走一步，再走一步。
   * Released under the MIT license
   */var c="http://www.w3.org/2000/svg",a={stopPropagation:function(e){(e=e||window.event).stopPropagation?e.stopPropagation():e.cancelBubble=!0},preventDefault:function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1},isNode:function(e){return e&&(1===e.nodeType||9===e.nodeType||11===e.nodeType)},bind:function(e,n,t){if(e.constructor!==Array&&e.constructor!==NodeList&&e.constructor!==HTMLCollection)window.attachEvent?e.attachEvent("on"+n,t):e.addEventListener(n,t,!1);else for(var o=0;o<e.length;o++)this.bind(e[o],n,t)},unbind:function(e,n,t){if(e.constructor!==Array&&e.constructor!==NodeList&&e.constructor!==HTMLCollection)window.detachEvent?e.detachEvent("on"+n,t):e.removeEventListener(n,t,!1);else for(var o=0;o<e.length;o++)this.unbind(e[o],n,t)},find:function(e,n,t){if(!this.isNode(e))return[];for(var o=e.getElementsByTagName(t||"*"),r=[],i=0;i<o.length;i++)this.isNode(o[i])&&("function"!=typeof n||n(o[i]))&&r.push(o[i]);return r},children:function(e,n){for(var t=e.childNodes,o=[],r=0;r<t.length;r++)this.isNode(t[r])&&("function"!=typeof n||n(t[r]))&&o.push(t[r]);return o},hasClass:function(e,n,t){n.constructor!==Array&&(n=[n]);for(var o=" "+(e.getAttribute("class")||"")+" ",r=0;r<n.length;r++)if(o.indexOf(" "+n[r]+" ")>=0){if(t)return!0}else if(!t)return!1;return!0},removeClass:function(e,n){var t=(" "+(e.getAttribute("class")||"")+" ").replace(" "+n.trim()+" "," ");e.setAttribute("class",t.trim())},addClass:function(e,n){if(!this.hasClass(e,n)){var t=e.getAttribute("class")||"";e.setAttribute("class",t+" "+n)}},toNode:function(e,n){var t;if(n)t=document.createElementNS(c,"svg");else{var o="div";/^<tr[> ]/.test(e)?o="tbody":/^<th[> ]/.test(e)||/^<td[> ]/.test(e)?o="tr":(/^<thead[> ]/.test(e)||/^<tbody[> ]/.test(e))&&(o="table"),t=document.createElement(o)}t.innerHTML=e;for(var r=t.childNodes,i=0;i<r.length;i++)if(this.isNode(r[i]))return r[i]},trigger:function(e,n){if(document.createEventObject)e.fireEvent("on"+n,document.createEventObject());else{var t=document.createEvent("HTMLEvents");t.initEvent(n,!0,!1),e.dispatchEvent(t)}},getStyle:function(e,n){var t=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle;return"string"==typeof n?t.getPropertyValue(n):t},offsetPosition:function(e){var n=0,t=0;for(t=e.offsetTop,n=e.offsetLeft,e=e.offsetParent;e;)t+=e.offsetTop,n+=e.offsetLeft,e=e.offsetParent;return{left:n,top:t}},mousePosition:function(e,n){var t=e.getBoundingClientRect();if(!n||!n.clientX)throw new Error("Event is necessary!");return{x:n.clientX-t.left,y:n.clientY-t.top}},remove:function(e){e.parentNode.removeChild(e)},setStyles:function(e,n){for(var t in n)e.style[t]=n[t]},size:function(e,n){var t,o;return"content"==n?(o=e.clientWidth-(this.getStyle(e,"padding-left")+"").replace("px","")-(this.getStyle(e,"padding-right")+"").replace("px",""),t=e.clientHeight-(this.getStyle(e,"padding-top")+"").replace("px","")-(this.getStyle(e,"padding-bottom")+"").replace("px","")):"padding"==n?(o=e.clientWidth,t=e.clientHeight):"border"==n?(o=e.offsetWidth,t=e.offsetHeight):"scroll"==n?(o=e.scrollWidth,t=e.scrollHeight):(o=e.offsetWidth,t=e.offsetHeight),{width:o,height:t}},append:function(e,n){var t=this.isNode(n)?n:this.toNode(n);return e.appendChild(t),t},prepend:function(e,n){var t=this.isNode(n)?n:this.toNode(n);return e.insertBefore(t,e.childNodes[0]),t},after:function(e,n){var t=this.isNode(n)?n:this.toNode(n);return e.parentNode.insertBefore(t,e.nextSibling),t},before:function(e,n){var t=this.isNode(n)?n:this.toNode(n);return e.parentNode.insertBefore(t,e),t}};function d(e,n,t,o,r){var i=o/300*(e-255)+255,l=o/300*(n-255)+255,c=o/300*(t-255)+255;return l*=(160-r)/160,c*=(160-r)/160,[(i*=(160-r)/160).toFixed(0),l.toFixed(0),c.toFixed(0)]}function s(e,n,t){for(var o=document.getElementById("colors-picker-dialog_canvas0").getContext("2d"),r=0;r<300;r++)for(var i=0;i<160;i++){var l=d(e,n,t,r,i);o.fillStyle="rgb("+l[0]+","+l[1]+","+l[2]+")",o.fillRect(r,i,1,1)}}function u(e,n,t){var o=1/6;return 255==e&&0==n?t/255*o:0==n&&255==t?2*o-e/255*o:0==e&&255==t?2*o+n/255*o:0==e&&255==n?4*o-t/255*o:255==n&&0==t?4*o+e/255*o:1-n/255*o}function p(e){var t=d.apply(void 0,n(e._colors_picker_.color_rgb).concat(n(e._colors_picker_.pointer_position))),o=[].concat(n(t),[e._colors_picker_.color_alpha]);e._colors_picker_.target._color_=o;var r="rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]+")";document.getElementById("colors-picker-dialog_color").style.backgroundColor=r,document.getElementById("colors-picker-dialog_canvas0_btn").style.backgroundColor=r}function f(e,t,o,r){var i,l=document.getElementById("colors-picker-dialog");e._color_=t;var c=!0;l||function(){var e;a.append(document.body,"<div id='colors-picker-dialog'\n                style='\n                    position: fixed;\n                    box-shadow: 0 0 7px 1px #9393a0;\n                    border-radius: 5px;\n                    background-color: white;\n                    font-size:0;\n                    user-select: none;\n                '>\n            <div id='colors-picker-dialog_move' style='\n                font-size: 16px;\n                text-align: center;\n                cursor: move;\n                border-radius: 5px 5px 0 0;\n                line-height: 30px;\n                background-color: #ffffff;\n                color: #252020;\n            '></div>\n            <div style='position: relative; overflow: hidden;' id='colors-picker-dialog_canvas0_frame'>\n                <canvas\n                    id='colors-picker-dialog_canvas0'\n                    style='width:300px;height:160px;'\n                    width='300px'\n                    height='160px'>\n                        非常抱歉，您的浏览器不支持canvas!\n                </canvas>\n                <span\n                    style='\n                        position: absolute;\n                        position: absolute;\n                        width: 12px;\n                        height: 12px;\n                        border-radius: 50%;\n                        right: -6px;\n                        top: -6px;\n                        box-shadow: 0 0 5px 3px #75757e;\n                        cursor:pointer;\n                    ' id='colors-picker-dialog_canvas0_btn'></span>\n            </div>\n            <div style='text-align:center;margin:20px 0;'>\n                <div\n                    id='colors-picker-dialog_color'\n                    style='\n                        display:inline-block;\n                        width:40px;\n                        height:40px;\n                        box-shadow: rgb(117, 117, 126) 0px 0px 9px 0px;\n                        border-radius:50%;\n                        margin-right:25px;\n                '></div>\n                <div style='display:inline-block;'>\n                    <div style='position: relative;' id='colors-picker-dialog_canvas1_frame'>\n                        <div id='colors-picker-dialog_canvas1'\n                            style='\n                                width:200px;\n                                height:16px;\n                                background-image: linear-gradient(to right, #f00, #f0f,#00f,#0ff,#0f0,#ff0,#f00); '>\n                        </div>\n                        <span\n                            style='\n                                position: absolute;\n                                width: 22px;\n                                height: 22px;\n                                display: inline-block;\n                                border-radius: 50%;\n                                right: -11px;\n                                top: -3.5px;\n                                cursor:pointer;\n                                box-shadow: 0 0 2px 0px grey;\n                                background: #faf8f8;'\n                            id='colors-picker-dialog_canvas1_btn'></span>\n                    </div>\n                    <div style='margin-top:10px;position: relative;' id='colors-picker-dialog_canvas2_frame'>\n                        <div id='colors-picker-dialog_canvas2'\n                            style='\n                                width:200px;\n                                height:16px;\n                                background-image: linear-gradient(to right, #f000, red); '>\n                        </div>\n                        <span\n                            style='\n                                position: absolute;\n                                width: 22px;\n                                height: 22px;\n                                box-shadow: 0 0 2px 0px grey;\n                                display: inline-block;\n                                border-radius: 50%;\n                                right: -11px;\n                                top: -3.5px;\n                                cursor:pointer;\n                                background: #faf8f8;'\n                            id='colors-picker-dialog_canvas2_btn'></span>\n                    </div>\n                </div>\n            </div>\n            <div style='text-align:center;padding:10px;'>\n                <button\n                    id='colors-picker-dialog_btn_cancel'\n                    style='\n                        margin-right:30px;\n                        background-color:#e0e0e0;\n                        width:90px;\n                        border-radius:5px;\n                        cursor:pointer;\n                        border:none;\n                        line-height:26px;\n                    '>取消</button>\n                <button\n                    id='colors-picker-dialog_btn_checked'\n                    style='\n                        background-color:#449cf6;\n                        color:white;width:90px;\n                        border-radius:5px;\n                        cursor:pointer;\n                        border:none;\n                        line-height:26px;\n                    '>确定</button>\n            </div>\n        </div>"),e=document.getElementById("colors-picker-dialog_move"),a.bind(e,"mousedown",(function(n){e.setCapture&&e.setCapture();var t=e.parentNode,o=n.clientX,r=n.clientY,i=a.getStyle(t,"left").replace("px",""),l=a.getStyle(t,"top").replace("px","");function c(e){t.style.left=i- -e.clientX-o+"px",t.style.top=l- -e.clientY-r+"px"}a.bind(document,"mousemove",c),a.bind(document,"mouseup",(function(e){return a.unbind(document,"mousemove",c),t.releaseCapture&&t.releaseCapture(),!1}))})),(l=document.getElementById("colors-picker-dialog")).style.display="none";var t=-1;a.bind(document.getElementById("colors-picker-dialog_canvas0_btn"),"mousedown",(function(){t=0})),a.bind(document.getElementById("colors-picker-dialog_canvas1_btn"),"mousedown",(function(){t=1})),a.bind(document.getElementById("colors-picker-dialog_canvas2_btn"),"mousedown",(function(){t=2}));for(var o=function(e){if([0,1,2].indexOf(t)>-1){var o=a.mousePosition(document.getElementById("colors-picker-dialog_canvas"+t+"_frame"),e),r=document.getElementById("colors-picker-dialog_canvas"+t+"_btn");if(0===t){if(o.y>160||o.y<0||o.x<0||o.x>300)return;r.style.left=o.x-6+"px",r.style.top=o.y-6+"px",l._colors_picker_.pointer_position=[o.x,o.y],p(l)}else{if(o.x<0||o.x>200)return;if(r.style.left=o.x-11+"px",1===t){var i=((d=o.x/200)<=(v=1/6)?(u=255,f=0,g=d/v*255):d<=2*v?(u=(2*v-d)/v*255,f=0,g=255):d<=.5?(u=0,f=(d-2*v)/v*255,g=255):d<=4*v?(u=0,f=255,g=(4*v-d)/v*255):d<=5*v?(u=(d-4*v)/v*255,f=255,g=0):(u=255,f=(1-d)/v*255,g=0),[+u.toFixed(0),+f.toFixed(0),+g.toFixed(0)]);document.getElementById("colors-picker-dialog_canvas2").style.backgroundImage="linear-gradient(to right, #f000, rgb("+i[0]+","+i[1]+","+i[2]+"))",c&&(c=!1,setTimeout((function(){s.apply(void 0,n(i)),c=!0,l._colors_picker_.color_rgb=i,p(l)}),10))}else l._colors_picker_.color_alpha=o.x/200,p(l)}}var d,u,f,g,v},r=function(e){a.bind(document.getElementById("colors-picker-dialog_canvas"+e),"click",(function(n){t=e,o(n),t=-1}))},i=0;i<3;i++)r(i);a.bind(document.body,"mousemove",o),a.bind(document.body,"mouseup",(function(){t=-1})),a.bind(document.getElementById("colors-picker-dialog_btn_cancel"),"click",(function(){l.style.display="none"})),a.bind(document.getElementById("colors-picker-dialog_btn_checked"),"click",(function(){l.style.display="none";var e=l._colors_picker_.target._color_;l._colors_picker_.callback("rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")")}))}(),i=function(){l._colors_picker_={callback:o,target:e,color_rgb:[e._color_[0],e._color_[1],e._color_[2]],color_alpha:e._color_[3],pointer_position:[300,0]};var t=window.innerWidth,i=window.innerHeight;l.style.left=.5*t-150+"px",l.style.top=.5*i-142.5+"px";var c=l._colors_picker_.target._color_;s.apply(void 0,n(c)),document.getElementById("colors-picker-dialog_canvas2").style.backgroundImage="linear-gradient(to right, #f000, rgb("+c[0]+","+c[1]+","+c[2]+"))",document.getElementById("colors-picker-dialog_canvas1_btn").style.left=200*u.apply(void 0,n(c))-11+"px",document.getElementById("colors-picker-dialog_canvas2_btn").style.left=200*c[3]-11+"px",document.getElementById("colors-picker-dialog_color").style.backgroundColor="rgba("+c[0]+","+c[1]+","+c[2]+","+c[3]+")",document.getElementById("colors-picker-dialog_move").innerText=r,l.style.display="block"},a.bind(e,"click",i)}var g,v=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"选择颜色",o=e,i=l(n),c=[],a={then:function(e){return c.push(e),a}};return f(o,i,(function(e){var n,t=r(c);try{for(t.s();!(n=t.n()).done;){(0,n.value)(e)}}catch(e){t.e(e)}finally{t.f()}}),t),a},b=null;v.openPicker=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"选择颜色";if(g=n,null===b)b=document.createElement("button"),v(b,e,t).then((function(e){g(e)}));else{var o=l(e),r=document.getElementById("colors-picker-dialog");document.getElementById("colors-picker-dialog_move").innerText=t,r._colors_picker_.color_rgb=[o[0],o[1],o[2]],r._colors_picker_.color_alpha=o[3],r._colors_picker_.target._color_=o}b.click()},"object"===("undefined"==typeof module?"undefined":e(module))&&"object"===e(module.exports)?module.exports=v:window.ColorsPicker=v}(),{}},window.__nefbl_pack__bundleSrc__[46]=function(){var e={};return e.default="\n .view{\n\nwidth: 82px;\n\nleft: 50px;\n\n}\n\n .view>.list>li{\n\ndisplay: inline-block;\n\nwidth: 30px;\n\nheight: 30px;\n\nmargin: 5px;\n\noutline: 1px solid rgb(185, 182, 182);\n\nfont-size: 0;\n\nvertical-align: top;\n\nbackground-size: contain;\n\nbackground-repeat: no-repeat;\n\nbackground-position: center center;\n\n}\n\n .view>.list>li[active='yes']{\n\nbackground-color: #e6e1e1;\n\n}\n\n .view>.list>li.move{\n\nbackground-image: url('./image/move.png');\n\n}\n\n .view>.list>li.eraser{\n\nbackground-image: url('./image/eraser.png');\n\n}\n\n .view>.list>li.eraser-bg{\n\nbackground-image: url('./image/eraser-bg.png');\n\n}\n\n .view>.color{\n\nheight: 40px;\n\nposition: absolute;\n\nbottom: 5px;\n\nleft: 0;\n\n}\n\n .view>.color>span{\n\nposition: absolute;\n\ndisplay: inline-block;\n\noutline: 1px solid rgb(201, 201, 202);\n\nwidth: 30px;\n\nheight: 30px;\n\ncursor: pointer;\n\n}\n\n .view>.color>span#forecolor{\n\nleft: 15px;\n\ntop: 0;\n\nbackground-color: white;\n\n}\n\n .view>.color>span#backcolor{\n\nleft: 35px;\n\ntop: 10px;\n\nbackground-color: black;\n\n}\n",e},window.__nefbl_pack__bundleSrc__[47]=function(){var e={};return e.default='<div class="view">\r\n    <h2 ui-dragdrop>\r\n        　工具箱\r\n    </h2>\r\n    <ul class="list">\r\n        <li title="移动工具" class="move" ui-on:click="changeTool" name="move" ui-bind:active="active==\'move\'?\'yes\':\'no\'">\r\n        </li>\r\n        <li title="橡皮擦" class="eraser" ui-on:click="changeTool" name="eraser"\r\n            ui-bind:active="active==\'eraser\'?\'yes\':\'no\'"></li>\r\n        \x3c!-- <li title="背景橡皮擦" class="eraser-bg" ui-on:click="changeTool" name="eraser-bg" ui-bind:active="active==\'eraser-bg\'?\'yes\':\'no\'"></li> --\x3e\r\n    </ul>\r\n    <div class="color">\r\n        <span id="backcolor" title="背景色"></span>\r\n        <span id="forecolor" title="前景色"></span>\r\n    </div>\r\n</div>',e};